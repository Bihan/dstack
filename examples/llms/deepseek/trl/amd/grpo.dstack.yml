type: task
# The name is optional, if not specified, generated randomly
name: trl-train-grpo

python: "3.10"
# nvcc: true
# Required environment variables
env:
  - WANDB_API_KEY
  - WANDB_PROJECT
  - MODEL_ID=deepseek-ai/DeepSeek-R1-Distill-Qwen-1.5B
# Commands of the task
commands:
   - pip install trl
   - pip install datasets
   - mkdir -p grpo_example
   - cp examples/llms/deepseek/trl/amd/grpo_train.py grpo_example/grpo_train.py
   - cd grpo_example
   - python grpo_train.py
     --model_name_or_path $MODEL_ID
     --dataset_name trl-lib/tldr
     --per_device_train_batch_size 2
     --logging_steps 25
     --output_dir Deepseek-Distill-Qwen-1.5B-GRPO
     --trust_remote_code

resources:
  gpu: mi300x
  disk: 150GB
